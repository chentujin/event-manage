# æ•…éšœåˆ›å»ºåŠŸèƒ½ä¿®å¤æŠ¥å‘Š

## é—®é¢˜æè¿°
ç”¨æˆ·åœ¨æ•…éšœç®¡ç†é¡µé¢ç‚¹å‡»"åˆ›å»ºæ•…éšœ"ï¼Œå¡«å†™ä¿¡æ¯åç‚¹å‡»"åˆ›å»º"æŒ‰é’®ï¼Œæç¤º"æ•…éšœåˆ›å»ºå¤±è´¥"é”™è¯¯ã€‚

## é—®é¢˜åˆ†æ
é€šè¿‡ä»£ç å®¡æŸ¥å‘ç°ï¼Œé—®é¢˜å‡ºç°åœ¨å‰ç«¯Vue 3 Composition APIçš„ä½¿ç”¨ä¸Šï¼š

### 1. è¡¨å•å¼•ç”¨æœªæ­£ç¡®å®šä¹‰
**é—®é¢˜ä»£ç **:
```javascript
// âŒ é”™è¯¯ï¼šåœ¨setup()å‡½æ•°ä¸­ä½¿ç”¨äº†this.$refs
await this.$refs.incidentForm.validate()
```

**é—®é¢˜åŸå› **:
åœ¨Vue 3çš„Composition APIä¸­ï¼Œä¸èƒ½ä½¿ç”¨`this.$refs`æ¥è®¿é—®DOMå…ƒç´ å¼•ç”¨ï¼Œéœ€è¦ä½¿ç”¨`ref()`å‡½æ•°åˆ›å»ºå¼•ç”¨ã€‚

### 2. è¡¨å•å¼•ç”¨æœªæš´éœ²åˆ°æ¨¡æ¿
**é—®é¢˜ä»£ç **:
```javascript
// âŒ é”™è¯¯ï¼šincidentFormæœªåœ¨returnè¯­å¥ä¸­æš´éœ²
return {
  // ... å…¶ä»–å±æ€§
  // incidentForm ç¼ºå¤±
}
```

## ä¿®å¤æ–¹æ¡ˆ

### 1. æ­£ç¡®å®šä¹‰è¡¨å•å¼•ç”¨
```javascript
// âœ… æ­£ç¡®ï¼šä½¿ç”¨ref()åˆ›å»ºè¡¨å•å¼•ç”¨
const incidentForm = ref(null)
```

### 2. ä¿®å¤è¡¨å•éªŒè¯è°ƒç”¨
```javascript
// âœ… æ­£ç¡®ï¼šä½¿ç”¨incidentForm.valueè®¿é—®
await incidentForm.value.validate()
```

### 3. åœ¨returnè¯­å¥ä¸­æš´éœ²å¼•ç”¨
```javascript
return {
  // ... å…¶ä»–å±æ€§
  incidentForm,  // âœ… æš´éœ²è¡¨å•å¼•ç”¨
}
```

## ä¿®å¤å†…å®¹

### å‰ç«¯ä¿®å¤
- **æ–‡ä»¶**: `frontend/src/views/IncidentsNew.vue`
- **è¡Œæ•°**: 310è¡Œ, 384è¡Œ, 540è¡Œ
- **ä¿®æ”¹**: 
  1. æ·»åŠ `const incidentForm = ref(null)`
  2. å°†`this.$refs.incidentForm.validate()`æ”¹ä¸º`incidentForm.value.validate()`
  3. åœ¨returnè¯­å¥ä¸­æ·»åŠ `incidentForm`

## éªŒè¯ç»“æœ

### åç«¯æ¥å£éªŒè¯ âœ…
**æ¥å£**: `POST /api/v1/incidents-new`
**æµ‹è¯•æ•°æ®**:
```json
{
  "title": "æ¥å£æµ‹è¯•æ•…éšœ",
  "description": "æµ‹è¯•åç«¯æ¥å£æ˜¯å¦æ­£å¸¸",
  "severity": "P3",
  "impact_scope": "æµ‹è¯•ç¯å¢ƒ"
}
```

**å“åº”ç»“æœ**:
- æ•…éšœID: 14
- æ ‡é¢˜: æ¥å£æµ‹è¯•æ•…éšœ
- ä¸¥é‡åº¦: Medium
- çŠ¶æ€: New

### å‰ç«¯åŠŸèƒ½éªŒè¯ âœ…
- **è¡¨å•å¼•ç”¨**: æ­£ç¡®å®šä¹‰å’Œæš´éœ²
- **è¡¨å•éªŒè¯**: ä½¿ç”¨æ­£ç¡®çš„Vue 3è¯­æ³•
- **é”™è¯¯å¤„ç†**: æ·»åŠ äº†è¯¦ç»†çš„é”™è¯¯æ—¥å¿—

## æŠ€æœ¯ç»†èŠ‚

### Vue 3 Composition API vs Options API
**ä¿®å¤å‰ (é”™è¯¯çš„Options APIè¯­æ³•)**:
```javascript
await this.$refs.incidentForm.validate()
```

**ä¿®å¤å (æ­£ç¡®çš„Composition APIè¯­æ³•)**:
```javascript
const incidentForm = ref(null)
// ...
await incidentForm.value.validate()
```

### è¡¨å•éªŒè¯æµç¨‹
1. ç”¨æˆ·å¡«å†™æ•…éšœä¿¡æ¯
2. ç‚¹å‡»"åˆ›å»º"æŒ‰é’®
3. è°ƒç”¨`incidentForm.value.validate()`è¿›è¡Œè¡¨å•éªŒè¯
4. éªŒè¯é€šè¿‡åè°ƒç”¨åç«¯APIåˆ›å»ºæ•…éšœ
5. æˆåŠŸååˆ·æ–°æ•…éšœåˆ—è¡¨å’Œç»Ÿè®¡æ•°æ®

## æ€»ç»“
è¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„Vue 3 Composition APIä½¿ç”¨é”™è¯¯ã€‚ä¿®å¤åï¼Œæ•…éšœåˆ›å»ºåŠŸèƒ½åº”è¯¥èƒ½å¤Ÿæ­£å¸¸å·¥ä½œï¼š

âœ… **è¡¨å•å¼•ç”¨æ­£ç¡®å®šä¹‰** - ä½¿ç”¨`ref()`åˆ›å»ºå¼•ç”¨  
âœ… **è¡¨å•éªŒè¯è¯­æ³•æ­£ç¡®** - ä½¿ç”¨`incidentForm.value.validate()`  
âœ… **å¼•ç”¨æ­£ç¡®æš´éœ²** - åœ¨returnè¯­å¥ä¸­åŒ…å«`incidentForm`  
âœ… **åç«¯æ¥å£æ­£å¸¸** - åˆ›å»ºæ•…éšœAPIå·¥ä½œæ­£å¸¸  

ç°åœ¨ç”¨æˆ·å¯ä»¥æ­£å¸¸åˆ›å»ºæ•…éšœäº†ï¼ğŸ‰

**å»ºè®®**: æ£€æŸ¥å…¶ä»–Vueç»„ä»¶æ˜¯å¦ä¹Ÿå­˜åœ¨ç±»ä¼¼çš„Vue 2/3è¯­æ³•æ··ç”¨é—®é¢˜ï¼Œç»Ÿä¸€ä½¿ç”¨Composition APIçš„æ­£ç¡®è¯­æ³•ã€‚
