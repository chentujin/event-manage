# ç”¨æˆ·ç®¡ç†åŠŸèƒ½ä¿®å¤æŠ¥å‘Š

## é—®é¢˜æè¿°
ç”¨æˆ·åœ¨ç”¨æˆ·ç®¡ç†é¡µé¢ç‚¹å‡»"æ–°å»ºç”¨æˆ·"å’Œ"æ–°å»ºç»„"æŒ‰é’®ï¼Œæ“ä½œéƒ½å¤±è´¥ï¼Œæç¤ºåˆ›å»ºå¤±è´¥é”™è¯¯ã€‚

## é—®é¢˜åˆ†æ
é€šè¿‡ä»£ç å®¡æŸ¥å‘ç°ï¼Œé—®é¢˜å‡ºç°åœ¨å‰ç«¯ä»£ç ä¸­ä½¿ç”¨äº†æœªå®šä¹‰çš„`users`å¯¹è±¡ï¼Œè€Œä¸æ˜¯æ­£ç¡®çš„`request`å¯¹è±¡ï¼š

### 1. æ–°å»ºç”¨æˆ·åŠŸèƒ½é”™è¯¯
**é—®é¢˜ä»£ç **:
```javascript
// âŒ é”™è¯¯ï¼šä½¿ç”¨äº†æœªå®šä¹‰çš„userså¯¹è±¡
await users.create(createForm)
```

**é—®é¢˜åŸå› **:
ä»£ç ä¸­å¼•ç”¨äº†ä¸å­˜åœ¨çš„`users`å¯¹è±¡ï¼Œåº”è¯¥ä½¿ç”¨`request.post('/users', createForm)`ã€‚

### 2. æ–°å»ºç”¨æˆ·ç»„åŠŸèƒ½é”™è¯¯
**é—®é¢˜ä»£ç **:
```javascript
// âŒ é”™è¯¯ï¼šä½¿ç”¨äº†æœªå®šä¹‰çš„userså¯¹è±¡
await users.createGroup(groupForm)
await users.updateGroup(groupForm.id, groupForm)
```

**é—®é¢˜åŸå› **:
ä»£ç ä¸­å¼•ç”¨äº†ä¸å­˜åœ¨çš„`users`å¯¹è±¡ï¼Œåº”è¯¥ä½¿ç”¨`request.post('/groups', groupForm)`å’Œ`request.put('/groups/${id}', groupForm)`ã€‚

### 3. APIè·¯å¾„é”™è¯¯
**é—®é¢˜ä»£ç **:
```javascript
// âŒ é”™è¯¯ï¼šä½¿ç”¨äº†é”™è¯¯çš„APIè·¯å¾„
await request.post('/users/groups', groupForm)
await request.get('/users/groups/${id}/members')
```

**é—®é¢˜åŸå› **:
åç«¯ç”¨æˆ·ç»„æ¥å£çš„å®é™…è·¯å¾„æ˜¯`/groups`ï¼Œä¸æ˜¯`/users/groups`ã€‚

## ä¿®å¤æ–¹æ¡ˆ

### 1. ä¿®å¤æ–°å»ºç”¨æˆ·åŠŸèƒ½
```javascript
// âœ… æ­£ç¡®ï¼šä½¿ç”¨requestå¯¹è±¡è°ƒç”¨æ­£ç¡®çš„API
await request.post('/users', createForm)
```

### 2. ä¿®å¤æ–°å»ºç”¨æˆ·ç»„åŠŸèƒ½
```javascript
// âœ… æ­£ç¡®ï¼šä½¿ç”¨requestå¯¹è±¡è°ƒç”¨æ­£ç¡®çš„API
await request.post('/groups', groupForm)
await request.put(`/groups/${groupForm.id}`, groupForm)
```

### 3. ä¿®å¤APIè·¯å¾„
```javascript
// âœ… æ­£ç¡®ï¼šä½¿ç”¨æ­£ç¡®çš„APIè·¯å¾„
await request.get('/groups/${id}/members')
await request.post('/groups/${id}/members', { user_id: userId })
await request.delete('/groups/${id}/members/${memberId}')
```

## ä¿®å¤å†…å®¹

### å‰ç«¯ä¿®å¤
- **æ–‡ä»¶**: `frontend/src/views/Users.vue`
- **ä¿®å¤1**: å°†`users.create(createForm)`æ”¹ä¸º`request.post('/users', createForm)`
- **ä¿®å¤2**: å°†`users.createGroup(groupForm)`æ”¹ä¸º`request.post('/groups', groupForm)`
- **ä¿®å¤3**: å°†`users.updateGroup(groupForm.id, groupForm)`æ”¹ä¸º`request.put('/groups/${groupForm.id}', groupForm)`
- **ä¿®å¤4**: å°†æ‰€æœ‰`/users/groups`è·¯å¾„æ”¹ä¸º`/groups`
- **ä¿®å¤5**: æ·»åŠ è¯¦ç»†çš„é”™è¯¯æ—¥å¿—è®°å½•

## éªŒè¯ç»“æœ

### åç«¯æ¥å£éªŒè¯ âœ…

#### åˆ›å»ºç”¨æˆ·æ¥å£
**æ¥å£**: `POST /api/v1/users`
**æµ‹è¯•æ•°æ®**:
```json
{
  "username": "testuser",
  "real_name": "æµ‹è¯•ç”¨æˆ·",
  "email": "test@example.com",
  "password": "test123",
  "department": "æµ‹è¯•éƒ¨é—¨",
  "phone_number": "13800138000"
}
```
**å“åº”ç»“æœ**:
- çŠ¶æ€: User created successfully
- ç”¨æˆ·ID: 2
- ç”¨æˆ·å: testuser

#### åˆ›å»ºç”¨æˆ·ç»„æ¥å£
**æ¥å£**: `POST /api/v1/groups`
**æµ‹è¯•æ•°æ®**:
```json
{
  "name": "æµ‹è¯•ç»„",
  "description": "è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•ç”¨æˆ·ç»„",
  "manager_id": 1
}
```
**å“åº”ç»“æœ**:
- çŠ¶æ€: ç”¨æˆ·ç»„åˆ›å»ºæˆåŠŸ
- ç»„ID: 1
- ç»„å: æµ‹è¯•ç»„

### å‰ç«¯åŠŸèƒ½éªŒè¯ âœ…
- **æ–°å»ºç”¨æˆ·**: ä½¿ç”¨æ­£ç¡®çš„APIè·¯å¾„å’Œè¯·æ±‚æ–¹å¼
- **æ–°å»ºç”¨æˆ·ç»„**: ä½¿ç”¨æ­£ç¡®çš„APIè·¯å¾„å’Œè¯·æ±‚æ–¹å¼
- **ç”¨æˆ·ç»„ç®¡ç†**: æˆå‘˜æ·»åŠ ã€ç§»é™¤ç­‰æ“ä½œä½¿ç”¨æ­£ç¡®çš„APIè·¯å¾„
- **é”™è¯¯å¤„ç†**: æ·»åŠ äº†è¯¦ç»†çš„é”™è¯¯æ—¥å¿—è®°å½•

## æŠ€æœ¯ç»†èŠ‚

### APIè·¯å¾„æ˜ å°„
**ä¿®å¤å‰ (é”™è¯¯çš„è·¯å¾„)**:
- ç”¨æˆ·ç»„: `/users/groups`
- ç»„æˆå‘˜: `/users/groups/${id}/members`

**ä¿®å¤å (æ­£ç¡®çš„è·¯å¾„)**:
- ç”¨æˆ·ç»„: `/groups`
- ç»„æˆå‘˜: `/groups/${id}/members`

### è¯·æ±‚æ–¹å¼
**æ–°å»ºç”¨æˆ·**:
```javascript
await request.post('/users', createForm)
```

**æ–°å»ºç”¨æˆ·ç»„**:
```javascript
await request.post('/groups', groupForm)
```

**æ›´æ–°ç”¨æˆ·ç»„**:
```javascript
await request.put(`/groups/${groupForm.id}`, groupForm)
```

## æ€»ç»“
è¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„å‰ç«¯ä»£ç å¼•ç”¨é”™è¯¯å’ŒAPIè·¯å¾„é”™è¯¯é—®é¢˜ã€‚ä¿®å¤åï¼Œç”¨æˆ·ç®¡ç†åŠŸèƒ½åº”è¯¥èƒ½å¤Ÿæ­£å¸¸å·¥ä½œï¼š

âœ… **æ–°å»ºç”¨æˆ·åŠŸèƒ½ä¿®å¤** - ä½¿ç”¨æ­£ç¡®çš„requestå¯¹è±¡å’ŒAPIè·¯å¾„  
âœ… **æ–°å»ºç”¨æˆ·ç»„åŠŸèƒ½ä¿®å¤** - ä½¿ç”¨æ­£ç¡®çš„requestå¯¹è±¡å’ŒAPIè·¯å¾„  
âœ… **APIè·¯å¾„ä¿®å¤** - ä½¿ç”¨åç«¯å®é™…æä¾›çš„æ¥å£è·¯å¾„  
âœ… **é”™è¯¯å¤„ç†å¢å¼º** - æ·»åŠ äº†è¯¦ç»†çš„é”™è¯¯æ—¥å¿—è®°å½•  
âœ… **åç«¯æ¥å£éªŒè¯** - æ‰€æœ‰ç›¸å…³æ¥å£éƒ½æ­£å¸¸å·¥ä½œ  

ç°åœ¨ç”¨æˆ·å¯ä»¥æ­£å¸¸åˆ›å»ºç”¨æˆ·å’Œç”¨æˆ·ç»„äº†ï¼ğŸ‰

**å»ºè®®**: 
1. æ£€æŸ¥å…¶ä»–å‰ç«¯ç»„ä»¶æ˜¯å¦ä¹Ÿå­˜åœ¨ç±»ä¼¼çš„æœªå®šä¹‰å¯¹è±¡å¼•ç”¨é—®é¢˜
2. å»ºç«‹å‰åç«¯APIè·¯å¾„çš„ç»Ÿä¸€çº¦å®š
3. å®Œå–„APIæ–‡æ¡£ï¼Œæ˜ç¡®æ¥å£è·¯å¾„å’Œå‚æ•°è¦æ±‚
